# 자동차 경주

## 기능 목록

- 게임 세팅
  - [x] 자동차 이름 입력 - InputView : inputCarNames()
  - [x] 시도할 횟수 입력 - InputView : inputAttempt()

- 게임 로직 처리
  - [x] 자동차 별로 무작위로 전진 - RacingCar : moveRandom()
  - [x] 이동 후 차수별 실행 결과(자동차의 위치) 출력 - InputView : printAttemptResult()
  - [x] 차수 횟수 도달시 게임 종료

- 게임 종료시
  - [x] 가장 멀리 간 자동차들이 우승
  - [x] 우승자 안내 문구 출력

- 예외 처리
  - [x] 자동차 이름 입력
  - [x] 시도할 횟수 입력

## 리팩토링

[토스ㅣSLASH 21 - 실무에서 바로 쓰는 Frontend Clean Code](https://www.youtube.com/watch?v=edWbHp_k_9Y&t=25s)
위 영상과 객체지향의 오해와 진실 책을 보고 프로그래밍 설계를 다시 해야겠다는 생각이 들었다.

> 목표 1. 모든 객체가 서로 협력할떄, 메세지를 전달하고 전달받으며 세부 로직은 서로 모르는 상태가 되는 것.
> 목표 2. Ramdom 숫자를 생성하더라도 테스트가 용이하도록 구현

- RacingCar : 자동차
  - 속성: 이름, 위치
  - 생성자: 자동차 객체 생성과 이름 유효성 검사
  - 메소드1: 다른 자동차 객체와 위치 비교, 위치 차이 반환하는 메소드
  - 메소드2: 다른 자동차 객체와 위치 비교해서 위치가 동일하면 true 반환
  - 메소드3: 어떤 숫자를 받아서 4 이상이면 전진하는 메소드

- RandomNumberGenerator : 랜덤 숫자 생성

- Referee : 자동차를 관리.
  - 차수별로 경주를 관할해서 자동차를 움직임.
  - 자동차들을 보고 1등이 누구인지 판단

- OutPutView : 유저에게 출력

- InputView : 유저의 입력, 기본적인 검증 수행

- Controller : 위 객체들의 협력을 담당

## 해야할 일

- [ ] RacingCars 객체 추가
- [참고](https://tecoble.techcourse.co.kr/post/2020-04-28-ask-instead-of-getter/)
- [참고2](https://www.slipp.net/questions/559)
- [참고3](https://www.slipp.net/questions/565)
  
- [ ] 테스트 코드 추가
- [ ] 클래스, 메소드 별 역할 구분
- [ ] 객체지향 생활체조 원칙 적용
  - [ ] 한 메소드에 오직 한 단계의 들여쓰기(indent)만 한다.
  - [ ] else 예약어를 쓰지 않는다.
  - [ ] 모든 원시값과 문자열을 포장한다.
  - [ ] 한 줄에 점을 하나만 찍는다.
  - [ ] 줄여쓰지 않는다(축약 금지).
  - [ ] 모든 엔티티를 작게 유지한다.
  - [ ] 3개 이상의 인스턴스 변수를 가진 클래스를 쓰지 않는다.
  - [ ] 일급 컬렉션을 쓴다.
  - [ ] 게터/세터/프로퍼티를 쓰지 않는다. 단, DTO는 허용한다.
  - [ ] 메소드의 인자 수를 최대 3개만 사용한다. 적을 수록 좋다.
  - [ ] 메소드가 한가지 일만 담당하도록 구현.
  - [ ] 클래스를 작게 유지하기 위해 노력. 50줄 이상이면 여러가지 일을 동시에 하고 있을 확률이 높다.
  - [ ] 메서드당 line을 10까지만 허용. 길이가 길어지면 메서드로 분리
  - [ ] 매직 리터럴 / 매직 넘버 사용을 자제하고 상수 사용

## 파일 구조

```
racingcar
├── Application.java
├── controller
│   └── RacingGameController.java : 게임 실행
├── domain
│   ├── GameResultAnalyzer.java : 게임 결과 분석
│   ├── RacingCar.java : 자동차 클래스
│   └── RandomNumberGenerator.java : 무작위 숫자 생성
├── exception
│   └── InvalidInputException.java : 유저 입력 예외
└── ui
    ├── InputView.java : 화면 출력
    └── OutputView.java : 유저 입력
```

### 생각정리

**입력값 검증의 책임**

InputView 에서는 기본적인 입력값 검증에 대한 책임이 있는게 확실해 보인다. (공백, 형식에 맞지 않는 입력 등)
그런데, 비즈니스 로직에 대한 검증의 책임은 누구한테 있는것일까? (길이 5자 이내, 1~9사이 등)

이름이 5자 안쪽이여야 한다는건 Car 때문에 생긴 제약일까 아니면 자동차 외부에서 정해진 규칙일까?

자동차에 이름을 새기려면 너무 길면 안되기 때문에 글자수 제한이 생긴거라고 생각하면,

RacingCar 생성시에 이름을 전달받고, 생성자에서 검증 로직을 구현하는것이 좋아보인다.
하지만, 생성자에서 특정 로직을 수행 하는것은 좋지 못하다.

해결방법 1. Name 클래스를 구현해서 이름 글자수 검증에 대한 책임을 이전하는 것이다.
하지만 이 경우 불필요한 코드만 많아지는 느낌이다.
해결방법 2. 컨트롤러에서 검증을 수행한 후 오류가 발생하지 않는 이름으로 RacingCar에게 전달한다.
다른 도메인 로직에 validator 클래스를 구현한 후 컨트롤러에서 이름 검증을 해서 전달한다.

2번은 매번 하던 방법인거 같으니 1번 방법으로 해보자.
